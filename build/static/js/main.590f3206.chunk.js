(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(16),u=t.n(r),o=(t(7),t(6)),i=t(3),s=t(0),l=function(e){var n=e.value,t=e.setFunction;return Object(s.jsx)("input",{value:n,onChange:t})},d=function(e){var n=e.text,t=e.value,c=e.setFunction;return Object(s.jsxs)("div",{children:[n," ",Object(s.jsx)(l,{value:t,setFunction:c})]})},j=function(e){var n=e.handlePersonsAdd,t=e.newName,c=e.newNumber,a=e.handleNameChange,r=e.handleNumberChange;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:a})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:c,onChange:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},b=function(e){var n=e.showAll,t=e.persons,c=e.handlePersonDelete,a=e.newSearch,r=n?t:t.filter((function(e){return!0===e.name.toLowerCase().includes(a.toLowerCase())}));return Object(s.jsx)("div",{children:r.map((function(e){return Object(s.jsxs)("div",{children:[e.name," ",e.number,Object(s.jsx)("button",{onClick:function(){return c(e)},children:"Delete"})]},e.id)}))})},h=function(e){var n=e.message,t=e.className;return null===n?null:Object(s.jsx)("div",{className:t,children:n})},f=t(4),m=t.n(f),O="/api/persons",v={getAll:function(){return m.a.get(O).then((function(e){return e.data}))},create:function(e){return m.a.post(O,e).then((function(e){return e.data}))},deletePerson:function(e){return console.log(e),m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){var t=m.a.put("".concat(O,"/").concat(n),e).then((function(e){return e.data}));return console.log(t),t}},g=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),u=Object(i.a)(r,2),l=u[0],f=u[1],m=Object(c.useState)(""),O=Object(i.a)(m,2),g=O[0],x=O[1],p=Object(c.useState)(""),w=Object(i.a)(p,2),C=w[0],N=w[1],S=Object(c.useState)(!0),P=Object(i.a)(S,2),A=P[0],F=P[1],k=Object(c.useState)(null),D=Object(i.a)(k,2),L=(D[0],D[1],Object(c.useState)(null)),T=Object(i.a)(L,2),y=T[0],B=T[1],E=Object(c.useState)(null),I=Object(i.a)(E,2),J=I[0],M=I[1],q=function(e,n){v.update(e,n).then((function(){var n=t.map((function(n){return n.name===e.name?Object(o.a)(Object(o.a)({},e),{},{id:n.id}):n}));a(n),f(""),x(""),M("Contact number updated for '".concat(e.name,"'")),setTimeout((function(){M(null)}),5e3)}))},z=function(e){for(var n in t)if(e.name.toLowerCase()===t[n].name.toLowerCase())return window.confirm("".concat(l," is already added to phonebook, update number?"))&&q(e,t[n].id),!0;return!1},G=function(e){a(t.concat(e)),v.create(e).then((function(e){return a(t.concat(e))})),M("Added ".concat(e.name)),setTimeout((function(){M(null)}),5e3)};return Object(c.useEffect)((function(){v.getAll().then((function(e){a(t.concat(e))}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{message:y,className:"error"}),Object(s.jsx)(h,{message:J,className:"message"}),Object(s.jsx)(d,{text:"Search",value:C,setFunction:function(e){N(e.target.value),0!==e.target.value.length?F(!1):F(!0)}}),Object(s.jsx)("h2",{children:"Add New"}),Object(s.jsx)(j,{handlePersonsAdd:function(e){e.preventDefault();var n={name:l,number:g,id:0===t.length?1:t[t.length-1].id+1};z(n)||(G(n),f(""),x(""))},newName:l,newNumber:g,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(b,{showAll:A,persons:t,handlePersonDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&v.deletePerson(e.id).then((function(){var n=t.filter((function(n){return n.id!==e.id}));a(n)})).catch((function(n){B("'".concat(e.name,"' was already removed from server")),setTimeout((function(){B(null)}),5e3)}))},newSearch:C})]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,u=n.getTTFB;t(e),c(e),a(e),r(e),u(e)}))};u.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root")),x()},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.590f3206.chunk.js.map